---
title: 块级元素具有包裹性后其宽度和其后代块级元素宽度的关系
---
普通块级元素的宽度是受到父元素宽度影响的，满足等式`子元素margin-left+子元素border-left+子元素padding-left+子元素width+子元素padding-right+子元素border-right+子元素paddig-right=父元素width`,
当子元素的边框值，内外边距都等于0时，由公式可以推导出，子元素的宽度即等于父元素的宽度。
即普通的块级元素的宽度是具有扩张性的，即以父元素为基础(父元素的宽度是固定的)，会自动填充父元素的内容，但是当块级元素具有包裹性后，它的宽度会由自身内容决定，完全不同以往，那么块级元素如何才会具有包裹性呢？
## 块级元素如何具有包裹性
要让块级元素具有包裹，可以划分为三种方式
* 通过为元素属性`display`设置为`inline-block`将元素设置为行内块元素
* 将元素设置为浮动元素
* 将元素设置为绝对定位(`absolute`或者`fixed`)
## 包裹性块级元素的宽度
固名思义，包裹性块级元素，既然包裹，那么它的宽度会由它的内容的宽度来决定，道理很简单，但真的是这样简单吗，举例说明就知道了~

## 包裹型元素和其子元素宽度的互相影响

为了更明显的观察规律，本例中为所有元素都添加了不同颜色的边框。
首先来看一个普通div元素的宽度，和这个元素行内块化后的效果对比图：
<div align="center"><image src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/14inline1.png"></div>


相关代码如下：
```

.outer{
      border:2px solid red;
    }
    div{
      margin-bottom:5px;
      padding-top:2px;
      padding-bottom:2px;
    }
    .inlineblock{
      display:inline-block;
      
    }
.first span{
      border: 1px solid green;
    }
<div class="outer">我是一个普通块级元素</div>

<div class=" outer inlineblock first"><span>我是一个inline-block元素</span></div>
```
可见，为外层div设置为`inline-block`后,当其子元素为非块级元素时，元素的宽度由子元素的宽度决定
### 当包裹型元素的子元素同时有块级元素和非块级元素时
想到这个问题时，总会一不小心发现一个悖论，包裹型元素本身的宽度由其子元素的宽度决定，那么当它的子元素是一个普通块级元素时，也不例外吗？这样的话，父元素由子元素决定，但因为这个子元素是一个普通块级元素，普通块级元素的宽度不是由父元素决定吗？这样无线循环，到底要怎样呢（懵懵懵），额，既然这样，直接看例子还是，看能不能找得到答案

首先来做第一个实验，相关示例代码如下
```
.outer{
      border:2px solid red;
    }
    div{
      margin-bottom:5px;
      padding-top:2px;
      padding-bottom:2px;
    }
    .inlineblock{
      display:inline-block;
      
    }
.seconed span{
      border: 1px solid green;
    }
.seconed div{
    border: 1px solid black;
}
  <div class=" outer inlineblock seconed">
    <span>我是一个inline-block元素</span>
    <div>我是一个div元素，内容比较长</div>
  </div>
```

图示效果如下：
<div align="center"><image src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/14inline2.png"></div>

由图中可以看出，外层inline-block元素的边框是紧紧包裹着内层div元素的，而div元素的边框恰好包裹了自身的内容，从这里是不是可以推出？当一个div具有包裹性后，其后代块级元素的宽度也具有了包裹性，由自身的内容决定，同样的，最外层的div由内层的块级元素的宽度决定了？由这个效果看确实是符合的。

然后，下面一次实验中我仅仅是把元素的文字内容换了，结果效果却大不相同，文字内容变换部分如下
```
  <div class=" outer inlineblock seconed">
    <span>我是一个inline-block元素,内容比较长</span>
    <div>我是一个div元素，内容比较短</div>
  </div>
```
此时效果如下：
<div align="center"><image src="http://p4a8bakov.bkt.clouddn.com/image/css/2018/03/14inline3.png"></div>

乍一看好像没什么不同，外层div的红色边框依然紧紧包裹着内层div的黑色边框，可仔细一看发现了异常，说好的内层div继承包裹性呢？这里明明它的黑色边框没有包裹住自身的文字内容，反倒看上去相似填充了外层div的宽度，这不是和上一例相矛盾吗？话说回来，这次内层div填充了外层div的宽度，那外层div宽度是哪儿来的？不要忘了，它还有另一个span子元素，这时候的外层div的边框不是恰好包裹了span子元素的边框吗？这样好像说的通了，可是外层元素到底是根据div子元素的宽度而定还是根据span子元素的内容而定呢？div子元素的边框到底是包裹自身内容还是应该填充父元素的内容呢？其实也简单，不妨分几步看一下

当一个块级元素具有包裹性时，它本身的宽度和它的子元素的宽度计算法则可以按照以下步骤：
1.首先找出该元素的所有非块级子元素，并分别按行计算出一行中的非块级子元素的和宽度和，取宽度和最大的一个，计为maxInineWidth,如上面两个例子中，子元素中只有一行涉及到了非块级元素，且该行只有一个span元素，因此span元素的宽度即是这里所求的maxInlineWidth值(注意：极端情况不含有非块级子元素，maxInlineWidth值为0)
2. 然后计算下各个普通文档流块级元素的宽度(脱离文档流的块级元素无需计算在内)，将块级子元素看做是纯包裹性元素，即它的宽度由其自身内容而定，找出最宽的div，将这个宽度值记为maxDivWidth
3.比较maxInlineWidth和maxDivWidth的值，取最大的一个，记为maxWidth,则外层的div对的宽度即为maxWidth
4.现在外层div的宽度已经确定了，所有子块级元素的宽度该扩充外层div了，即在第二步中计算出的所有宽度小于maxWidth的块级元素，都自动扩充内容区域填满外层div的宽度(而子元素中不属于块级元素的元素无需扩张了，因为行内块元素本身就是实实在在的包裹性元素，不受父元素宽度影响，当然，父元素宽度过小时，也会影响它，即它的宽度不会超过父元素，如文字内容在触碰到父元素的边框时会自动换行)

以上的计算方式其实是在外层包裹性元素的宽度不会受其它元素限制，可以随子元素内容扩充的情况下才有效的，即若外层包裹性元素的宽度受限的话，计算出的maxWidth有可能大于外层包裹性元素的受限宽度，此时，该外层包裹性元素的宽度依然取得是它的受限宽度(即因为受限，宽度最大不能超过XXX，或者因为受限，宽度必须为XXX)，受限的情况可能有好几种，比如以下两种情况：
*  该包裹性元素的父元素的宽度是一定的，那么该元素的宽度肯定不会超过父元素(**如果包裹性元素是绝对定位元素，则是它的宽度不会超过被绝对定位的元素的宽度,本文中提到包裹性元素和父元素的关系时，如果是绝对定位元素，则父元素均应用被绝对定位的那个元素替换，本文其它地方为了统一说明，均用父元素代替**)的宽度值，此时跳过第2,3，步，直接取受限宽度和maxInlineWidth值的最大值作为外层包裹性元素的宽度即可，其它步骤一样；

*  显示为该包裹性元素指定了width值得话，那么该包裹性元素的宽度值也确定了，此时可以直接跳过1,2,3，即maxWidth的值直接为它的指定值，子块级元素受限于该外层div元素的同时也会依据它来扩充（即子元素的宽度不会超过该宽度值，但当子块级元素按包裹性计算为比该宽度值小时，又会自动扩充到该宽度值）。

由第3步可以看到，**外层div的宽度是不会受到子元素中的不处于文档流的元素(如绝对定位或浮动)的任何影响的，但子元素中的不处于文档流的块级元素自身的宽度还是和普通块级元素一样，是会受到外层包裹元素宽度的制约的(不会超过这个值)，不同的一点是，它不会自动扩充为何外层包裹性元素同宽(当自身包裹内容原本小于父元素宽度值时，因为脱离文档流了，变为纯包裹性元素(浮动元素和绝对定位元素都是)不再自动扩充。。)**。自己试验验证一下即可，也可以看[这篇文章](https://hitobear.github.io/2018/03/14/%E4%BB%8E%E4%B8%80%E6%AC%A1%E5%88%A9%E7%94%A8%E5%9D%97%E7%BA%A7%E5%85%83%E7%B4%A0%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D%E5%BC%95%E5%8F%91%E7%9A%84bug%E6%84%9F%E6%82%9F%E5%87%BA%E5%85%83%E7%B4%A0%E7%9A%84%E5%8C%85%E8%A3%B9%E6%80%A7%E5%AE%BD%E5%BA%A6/)的一个例子了解一下。

综上：当外层块级元素具有包裹性后(可能由于浮动，绝对定位，或变为行内块元素)，它和它的子块级元素的宽度是互相影响的，并不是绝对的一个根据另一个而定，只不过表现的结果是，不管哪种情况(父级元素宽度等于子级元素宽度，或子级元素宽度扩充为父级元素宽度)，表现结果均为，父级元素宽度和子级块元素的宽度是一样的(当子级块元素非处于文档流中的元素中时则例外，**此时因为变为纯包裹性元素，和行内块元素一样，有可能小于父级元素宽度**）